ExplanationBuilderNode.prototype=new Node;ExplanationBuilderNode.prototype.constructor=ExplanationBuilderNode;ExplanationBuilderNode.prototype.parentNode=Node.prototype;ExplanationBuilderNode.authoringToolName="Explanation Builder";ExplanationBuilderNode.authoringToolDescription="Students use ideas from their Idea Basket to generate a response";
function ExplanationBuilderNode(b,a){this.view=a;this.type=b;this.prevWorkNodeIds=[];a.eventManager.subscribe("ideaBasketChanged",this.ideaBasketChanged,this)}ExplanationBuilderNode.prototype.parseDataJSONObj=function(b){return ExplanationBuilderState.prototype.parseDataJSONObj(b)};ExplanationBuilderNode.prototype.translateStudentWork=function(b){return b};ExplanationBuilderNode.prototype.onExit=function(){if(this.contentPanel)try{if(this.contentPanel.save)try{this.contentPanel.save()}catch(b){}}catch(a){history.back()}};
ExplanationBuilderNode.prototype.renderGradingView=function(b,a,c,i){var g=a.id,d=new ExplanationBuilder(this,this.view);d.prompt=d.content.prompt;d.background=d.content.background;var e=null;d.background!=null&&d.background!=""&&(e=d.background.indexOf("http")!=-1?d.background:this.view.getConfig().getConfigParam("getContentBaseUrl")+d.background);var d=c+"explanationBuilderIdeasDiv_"+g,h=createElement(document,"div",{id:d,style:"width:485px;height:315px;border: 1px solid;position:relative"});$("#"+
b).append(h);e!=null&&($("#"+d).css("background-image","url("+e+")"),$("#"+d).css("background-repeat","no-repeat"),$("#"+d).css("background-position","left top"));i=this.view.getIdeaBasketByWorkgroupId(i);a=a.getLatestWork();e=a.explanationIdeas;a=a.answer;for(h=0;h<e.length;h++){var f=e[h],j=f.id,m=f.xpos,n=f.ypos,f=f.color,k="";if(i!=null){var l=i.getIdeaById(j);if(l!=null)k=l.text}j='<div class="exIdea" class="selected" title="Click and drag to move; Click to change color" id="'+c+"explanationIdea"+
j+"_"+g+'" style="position:absolute; left:'+m+"px; top:"+n+"px; background-color:"+f+'">'+k+"</div>";$("#"+d).append(j)}c=c+"explanationBuilderAnswerDiv_"+g;g=createElement(document,"div",{id:c});$("#"+b).append(g);a=this.view.replaceSlashNWithBR(a);$("#"+c).html("<br>"+a)};ExplanationBuilderNode.prototype.getHTMLContentTemplate=function(){return createContent("node/explanationbuilder/explanationBuilder.html")};
ExplanationBuilderNode.prototype.getPrompt=function(){var b="";if(this.content!=null){var a=this.content.getContentJSON();if(a!=null&&a.prompt!=null)b=a.prompt}return b};ExplanationBuilderNode.prototype.ideaBasketChanged=function(b,a,c){c.view.getCurrentNode().id==c.id&&c.contentPanel.explanationBuilder.ideaBasketChanged(c.view.ideaBasket)};NodeFactory.addNode("ExplanationBuilderNode",ExplanationBuilderNode);typeof eventManager!="undefined"&&eventManager.fire("scriptLoaded","vle/node/explanationbuilder/ExplanationBuilderNode.js");View.prototype.explanationBuilderDispatcher=function(b,a,c){b=="explanationBuilderUpdatePrompt"?c.ExplanationBuilderNode.updatePrompt():b=="explanationBuilderUpdateBackgroundImageUrl"?c.ExplanationBuilderNode.updateBackgroundImageUrl():b=="explanationBuilderUpdateInstructions"&&c.ExplanationBuilderNode.updateInstructions()};
for(var events=["explanationBuilderUpdatePrompt","explanationBuilderUpdateBackgroundImageUrl","explanationBuilderUpdateInstructions"],x=0;x<events.length;x++)componentloader.addEvent(events[x],"explanationBuilderDispatcher");typeof eventManager!="undefined"&&eventManager.fire("scriptLoaded","vle/node/explanationbuilder/explanationBuilderEvents.js");
if(typeof eventManager != 'undefined'){eventManager.fire('scriptLoaded', 'vle/node/explanationbuilder/explanationbuilder_core_min.js');}
