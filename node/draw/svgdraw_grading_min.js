var LZ77=function(a){var a=a||{},b=a.referenceIntBase||96,d=" ".charCodeAt(0),c=d+b-1,g=Math.pow(b,2)-1,f=a.minStringLength||5,j=Math.pow(b,1)-1+f,e=a.defaultWindowLength||144,m=g+f,k=function(a,c){if(a>=0&&a<Math.pow(b,c)-1){for(var h="";a>0;)h=String.fromCharCode(a%b+d)+h,a=Math.floor(a/b);for(var n=c-h.length,f=0;f<n;f++)h=String.fromCharCode(d)+h;return h}else throw"Reference int out of range: "+a+" (width = "+c+")";},r=function(a,f){for(var h=0,n=0;n<f;n++){h*=b;var e=a.charCodeAt(n);if(e>=d&&
e<=c)h+=e-d;else throw"Invalid char code in reference int: "+e;}return h};this.compress=function(a,b){b=b||e;if(b>m)throw"Window length too large";for(var d="",c=0,s=a.length-f;c<s;){for(var o=Math.max(c-b,0),i=f,p=!1,l={distance:g,length:0},q=null;o+i<c;)if(a.substr(o,i)==a.substr(c,i)&&i<j)i++,p=!0;else{i-=1;if(p&&i>l.length)l.distance=c-o-i,l.length=i;i=f;o++;p=!1}l.length?(q="`"+k(l.distance,2)+k(l.length-f,1),c+=l.length):(q=a.charAt(c)!="`"?a.charAt(c):"``",c++);d+=q}return d+a.slice(c).replace(/`/g,
"``")};this.decompress=function(a){for(var b="",c=0;c<a.length;){var d=a.charAt(c);if(d!="`")b+=d,c++;else if(a.charAt(c+1)!="`"){var d=r(a.substr(c+1,2),2),e;e=a.charAt(c+3);e=r(e,1)+f;b+=b.substr(b.length-d-e,e);c+=f-1}else b+="`",c+=2}return b}};typeof eventManager!="undefined"&&eventManager.fire("scriptLoaded","vle/node/draw/svg-edit/lz77.js");var Utils={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(a){a=Utils.convertToXMLReferences(a);if(window.btoa)return window.btoa(a);var b=Array(Math.floor((a.length+2)/3)*4),d,c,g,f,j,e,m=0,k=0;do d=a.charCodeAt(m++),c=a.charCodeAt(m++),g=a.charCodeAt(m++),f=d>>2,d=(d&3)<<4|c>>4,j=(c&15)<<2|g>>6,e=g&63,isNaN(c)?j=e=64:isNaN(g)&&(e=64),b[k++]=this._keyStr.charAt(f),b[k++]=this._keyStr.charAt(d),b[k++]=this._keyStr.charAt(j),b[k++]=this._keyStr.charAt(e);
while(m<a.length);return b.join("")},decode64:function(a){if(window.atob)return window.atob(a);var b="",d,c,g="",f,j="",e=0,a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this._keyStr.indexOf(a.charAt(e++)),c=this._keyStr.indexOf(a.charAt(e++)),f=this._keyStr.indexOf(a.charAt(e++)),j=this._keyStr.indexOf(a.charAt(e++)),d=d<<2|c>>4,c=(c&15)<<4|f>>2,g=(f&3)<<6|j,b+=String.fromCharCode(d),f!=64&&(b+=String.fromCharCode(c)),j!=64&&(b+=String.fromCharCode(g));while(e<a.length);return unescape(b)},encodeUTF8:function(a){for(var b=
"",d=0;d<a.length;d++){var c=a.charCodeAt(d);c<128?b+=a[d]:c>127&&(b+=c<2048?String.fromCharCode(c>>6|192):String.fromCharCode(c>>12|224)+String.fromCharCode(c>>6&63|128),b+=String.fromCharCode(c&63|128))}return b},convertToXMLReferences:function(a){for(var b="",d=0;d<a.length;d++){var c=a.charCodeAt(d);c<128?b+=a[d]:c>127&&(b+="&#"+c+";")}return b},rectsIntersect:function(a,b){return b.x<a.x+a.width&&b.x+b.width>a.x&&b.y<a.y+a.height&&b.y+b.height>a.y},text2xml:function(a){var b;try{var d=$.browser.msie?
new ActiveXObject("Microsoft.XMLDOM"):new DOMParser;d.async=!1}catch(c){throw Error("XML Parser could not be instantiated");}try{b=$.browser.msie?d.loadXML(a)?d:!1:d.parseFromString(a,"text/xml")}catch(g){throw Error("Error parsing XML string");}return b}};typeof eventManager!="undefined"&&eventManager.fire("scriptLoaded","vle/node/draw/svg-edit/utils.js");function SVGDRAWSTATE(a,b){this.type="html";this.data=a;this.timestamp=b==null?(new Date).getTime():b}SVGDRAWSTATE.prototype.parseDataJSONObj=function(a){var b=new SVGDRAWSTATE;b.data=a.data;b.timestamp=a.timestamp;return b};SVGDRAWSTATE.prototype.getStudentWork=function(){return this.data};typeof eventManager!="undefined"&&eventManager.fire("scriptLoaded","vle/node/draw/svg-edit/svgdrawstate.js");
if(typeof eventManager != 'undefined'){eventManager.fire('scriptLoaded', 'vle/node/draw/svgdraw_grading_min.js');}
